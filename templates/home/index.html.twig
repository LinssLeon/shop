{% extends 'base.html.twig' %}

{% block title %}Online-Shop
{% endblock %}

{% block body %}
	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-light bg-light py-4 position-relative" style="z-index: 1;">
		<div class="container px-4 px-lg-5">
			<a class="navbar-brand" href="/">Online Shop</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="/">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#!">About</a>
					</li>
					<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" id="navbarDropdown" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Shop</a>
						<ul class="dropdown-menu" aria-labelledby="navbarDropdown">
							<li>
								<a class="dropdown-item" href="#!">All Products</a>
							</li>
							<li><hr class="dropdown-divider"/></li>
							<li>
								<a class="dropdown-item" href="#!">Popular Items</a>
							</li>
							<li>
								<a class="dropdown-item" href="#!">New Arrivals</a>
							</li>
						</ul>
					</li>
				</ul>
				<form class="d-flex">
					<a class="btn btn-outline-dark me-2" href="/login">Einloggen</a>
					<a class="btn btn-outline-dark me-2" href="/register">Registrieren</a>
					<a class="btn btn-outline-dark" href="{{ path('cart') }}">
						<i class="bi-cart-fill me-1"></i>
						Einkaufswagen
						<span class="badge bg-dark text-white ms-1 rounded-pill">0</span>
					</a>
				</form>
			</div>
		</div>
	</nav>
	<!-- Header -->
	<header class="bg-dark py-5">
		<div class="container px-4 px-lg-5 my-5">
			<div class="text-center text-white">
				<h1 class="display-4 fw-bolder">Gönn dir mal was</h1>
				<p class="lead fw-normal text-white-50 mb-0">Ab einem Bestellwert von mehr als 100€, 5€ sparen!</p>
			</div>
		</div>
	</header>
	<!-- Section -->
	<section class="py-5 bg-light">
		<div class="container-fluid px-4 px-lg-5 mt-5">
			<div
				class="row">
				<!-- Vertical background stripe -->
				<div class="col-md-2 bg-dark position-fixed h-100" style="left: 0; top: 0; z-index: 0;"></div>
				<!-- Sidebar for Filters -->
				<div class="col-md-2 offset-md-2" style="margin-top: -75px;">
					<h5>Filter by Category</h5>
					<form method="get" action="{{ path('home') }}">
						{% for category in categories %}
							<div class="form-check">
								<input class="form-check-input" type="checkbox" name="categories[]" value="{{ category.id }}" id="category{{ category.id }}" {% if category.id in selectedCategories %} checked {% endif %}>
								<label class="form-check-label" for="category{{ category.id }}">
									{{ category.name }}
								</label>
							</div>
						{% endfor %}
						<button type="submit" class="btn btn-primary mt-2">Apply Filters</button>
					</form>
				</div>
				<!-- Product List -->
				<div class="col-md-8 offset-md-4" style="margin-top: -225px;">
					<div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-start">
						{% for product in products %}
							<div class="col mb-5">
								<div
									class="card h-100">
									<!-- Product image -->
									{% if product.image %}
										<img class="card-img-top img-fluid" src="{{ asset('uploads/images/products/' ~ product.image) }}" alt="{{ product.name }}" style="max-height: 300px; object-fit: cover;">
									{% else %}
										<img class="card-img-top img-fluid" src="{{ asset('images/default-product.jpg') }}" alt="No image available" style="max-height: 300px; object-fit: cover;">
									{% endif %}
									<!-- Product details -->
									<div class="card-body p-4">
										<div
											class="text-center">
											<!-- Product name -->
											<h5 class="fw-bolder">{{ product.name }}</h5>
											<!-- Product price -->
											{{ product.price|number_format(2, ',', '.') }}€
										</div>
									</div>
									<!-- Product actions -->
									<div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
										<div class="text-center">
											<a class="btn btn-outline-dark mt-auto" href="{{ path('product_show', { 'id': product.id }) }}">Zum Produkt</a>
										</div>
									</div>
								</div>
							</div>
						{% else %}
							<p>No products available.</p>
						{% endfor %}
					</div>
				</div>
			</div>
		</div>
	</section>
	<!-- Footer -->
	<footer class="py-5 bg-dark">
		<div class="container">
			<p class="m-0 text-center text-white">Copyright &copy; Online Shop
				{{ "now"|date("Y") }}</p>
		</div>
	</footer>
{% endblock %}
