{# templates/cart/index.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Warenkorb
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<h2>Dein Warenkorb</h2>
		<a href="{{ path('home') }}" class="btn btn-secondary mt-3">Weiter einkaufen</a>

		{% if cart is empty %}
			<p>Dein Warenkorb ist leer.</p>
		{% else %}
			<table class="table">
				<thead>
					<tr>
						<th>Produkt</th>
						<th>Preis</th>
						<th>Menge</th>
						<th>Gesamt</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					{% for id, item in cart %}
						<tr>
							<td>{{ item.name }}</td>
							<td>{{ item.price|number_format(2, ',', '.') }}
								€</td>
							<td>
								<form action="{{ path('cart_update', {id: id}) }}" method="post" class="d-inline">
									<input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="form-control d-inline" style="width: 80px;">
									<button type="submit" class="btn btn-primary">Aktualisieren</button>
								</form>
							</td>
							<td>{{ (item.price * item.quantity)|number_format(2, ',', '.') }}
								€</td>
							<td>
								<form action="{{ path('cart_remove_quantity', {id: id}) }}" method="post" class="d-inline">
									<input type="number" name="quantity" value="1" min="1" max="{{ item.quantity }}" class="form-control d-inline" style="width: 80px;">
									<button type="submit" class="btn btn-warning">Entfernen</button>
								</form>
								<a href="{{ path('cart_remove', {id: id}) }}" class="btn btn-danger">Alle entfernen</a>
							</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>

			<h4>Gesamtsumme:
				{{ total|number_format(2, ',', '.') }}
				€</h4>
		{% endif %}
	</div>
{% endblock %}
